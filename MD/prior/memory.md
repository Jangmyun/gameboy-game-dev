### 메모리란?
메모리는 정보를 저장하는 장치로, 이진수 수를 저장한다.
Gameboy에서는 각 셀마다 8비트를 저장한다.

메모리의 종류는 두 가지가 있다.
- RAM (쓰기 가능)
- ROM (쓰기 불가능)

메모리와 CPU는 주소로 single number만 사용 가능.
각 메모리 칩은 주소를 가지고 있는데, CPU는 주소가 어딘지 모르기 때문에 *`chip selector`* 가 CPU의 물리 주소와 논리적 주소를 변환해준다.

메모리 칩마다 특성이 다르다.

### Game boy 메모리 맵

Game Boy에서 논리적 주소는 16비트 단위다. 2^16 = 65536 개의 논리적 주소가 있다. (`0000`-`FFFF`)

| Start | End   | Name | Description                                                     |
| ----- | ----- | ---- | --------------------------------------------------------------- |
| $0000 | $7FFF | ROM  | 카트리지에서 제공하는 게임 ROM.                                             |
| $8000 | $9FFF | VRAM | 비디오 RAM, 그래픽이 저장되고 배열되는 곳.                                      |
| $A000 | $BFFF | SRAM | 카트리지에서 데이터를 저장하기 위해 선택적으로 제공.                                   |
| $C000 | $DFFF | WRAM | Work RAM, 게임이 일반적인 용도로 사용할 수 있는 RAM.                            |
| $FE00 | $FE9F | OAM  | Object Attribute Memory, 객체"가 저장되는 곳.                           |
| $FF00 | $FF7F | I/O  | ROM도 RAM도 아니지만, 콘솔을 제어하는 곳.                                     |
| $FF80 | $FFFE | HRAM | High RAM, 더 빠르게 접근할 수 있는 소량의 일반-purpose RAM.                    |
| $FFFF | $FFFF | IE   | A lone I/O byte that's separated from the rest for some reason. |

### Labels

모든 주소를 수동으로 적어낼 수 없기 때문에 `라벨`을 사용한다.
라벨은 메모리의 바이트에 이름을 붙일 수 있다.

각 line의 시작 부분에 라벨 이름을 쓰고 콜론을 붙이면 그 바로 아래의 바이트를 참조한다. 
```asm
EntryPoint:
	ld a, 0
	ld [rNR52], a
```

위 코드에서 `EntryPoint`는 그 아래의 `ld a, 0`을 참조한다 (더 정확히는 명령어의 첫 번째 바이트를 참조)

`rNR52`는 라벨이 아니라 **상수**로  정의되어 있는데, 상수는 라벨과 거의 비슷하게 사용할 수 있다.

라벨 이름을 쓰는 것은 그것이 참조하고 있는 바이트의 주소를 사용하는 것과 동일한 효과를 가진다. `ld de, Tiles` 에서 `Tiles`는 tile data에서 첫번째 바이트를 참조하고 있다. `Tiles`가 $0190로 시작되는 공간에 저장돼있다고 가정하면, `ld de, Tiles`는 `ld de, $0190`로 바꿔 작성할 수 있다.

### 괄호의 의미

`ld a, [de]`같은 코드에서 대괄호는 기본적으로 "주소에 있는.." 으로 이해하면 되는데, `ld a, [$5414]`는 "5414번지에 저장된 값을 `a`에 복사" 하라는 명령어이다.

```asm
29    ld a, [de]
30    ld [hli], a
```

#### hli
[`de`는 레지스터 쌍이라는 사실](./register.md)을 알고 있지만 `[hli]`는 무엇일까?
`hl`은 레지스터 쌍인데 hl에 i가 붙었다.
`hli`는 특수한 표기법으로 `[hl+]`로도 쓸 수 있는데, `[hl]`과 동일하게 동작하지만 메모리 접근 후에 `hl`을 증가시킨다.
`[hld]`혹은 `[hl-]`는 `hl`을 감소시킨다.